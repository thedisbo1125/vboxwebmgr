<!-- 

	Global RDP Settings
	Copyright (C) 2022 Rich Fabian (imoore76 at yahoo dot com)
	
	$Id: settingsGlobalRDPSettings.html 595 2015-04-17 09:50:36Z imoore76 $

 -->

<style>
td.addspace {
    border-top: 3px solid transparent;
}
</style>

<ul>
        <li><a href="#vboxSettingsTabRDPGlobalSettings"><span class='rdptranslate'>Settings</span></a></li>
        <li><a href="#vboxSettingsTabRDPFileSettings"><span class='rdptranslate'>RDP File</span></a></li>
</ul>

<!-- RDP Global Settings Tab -->
<div id='vboxSettingsTabRDPGlobalSettings'>
	<table style='width: 100%' class='vboxVertical'>
		<tr style='vertical-align: middle'>
			<th><span class='rdptranslate'>VRDP Authentication Library:</span></th>
			<td>
				<table class="vboxInvisible" style='width: 97%'>
				<tr style='vertical-align: top'>
					<td style="width: auto; white-space: nowrap;" class="vboxFileFolderInput">
						<input type='text' class='vboxText' name='vboxSettingsVRDEAuthLibrary' />
						<input type="button" class="vboxImgButton" style="background-image: url(images/vbox/select_file_16px.png)"
							onClick="vboxSettingsBrowseVRDPAuthLibrary(this)" />
					</td>
				</tr>
				</table>				
			</td>
		</tr>
	</table>
</div>

<!-- RDP File Settings Tab -->
<div id='vboxSettingsTabRDPFileSettings'>
	<table style='width: 100%; margin-left:auto; margin-right:auto; vboxVertical'>
		<tr style='vertical-align: top'>
			<th colspan='1' style='width: 35%; text-align: right; padding-right: 10px;' class='addspace'><span class='translate'>Include Default RDP File Settings</span>:</th>
			<td class='addspace'><input type='checkbox' class='vboxCheckbox' id='vboxGlobalRDPIncludeDefaultFileSettings'></td>
		</tr>
		<tr style='vertical-align: top'>
                	<th colspan='1' style='width: 35%; text-align: right; padding-right: 10px;' class='addspace'><span class='translate'>Additional RDP File Settings</span>:</th>
			<td style='width: 300%' class='addspace'>
				<textarea spellcheck="false" class='vboxRunningEnabled' rows='16' cols='50' name='vboxGlobalRDPFileSettings' id='vboxGlobalRDPFileSettings'></textarea>
			</td>
		</tr>
	</table>
</div>

<script type='text/javascript'>

function vboxSettingsBrowseVRDPAuthLibrary(btn) {
	var def = $(btn).siblings('input').first();
	vboxFileBrowser($(def).val(),function(f){
		if(f) $(def).val(f);
	},false,trans('VRDP Authentication Library:','UIGlobalSettingsGeneral').replace(':',''));
}

var RDPExtraLines = $('#vboxSettingsDialog').data('vboxRDPSettings');

RDPtextarea  = document.getElementById('vboxGlobalRDPFileSettings');

if (RDPExtraLines.extralines.length > 0)
{
      for (let i = 0; i < RDPExtraLines.extralines.length; i++) {
            RDPtextarea.value += RDPExtraLines.extralines[i] + '\r\n';
      }
}

document.getElementById('vboxGlobalRDPIncludeDefaultFileSettings').checked = ($('#vboxSettingsDialog').data('vboxRDPSettings').includedeflines == 1);
document.frmVboxSettings.vboxSettingsVRDEAuthLibrary.value = $('#vboxSettingsDialog').data('vboxSystemProperties').VRDEAuthLibrary;

$(document).find('span.rdptranslate').html(function(i,h){return trans(h,'UIGlobalSettingsGeneral');});


/*
 *
 * Update Data onSave()
 *
 */
$('#vboxSettingsDialog').on('save',function(){

	RDPtextarea  = document.getElementById('vboxGlobalRDPFileSettings');
	RDPextralines = RDPtextarea.value.replace(/\r\n/g,"\n").split("\n");
	$('#vboxSettingsDialog').data('vboxRDPSettings').extralines = RDPextralines;

	$('#vboxSettingsDialog').data('vboxRDPSettings').includedeflines = 0;

	if (document.getElementById('vboxGlobalRDPIncludeDefaultFileSettings').checked)
	{
		$('#vboxSettingsDialog').data('vboxRDPSettings').includedeflines = 1;
	}

	$('#vboxSettingsDialog').data('vboxSystemProperties').VRDEAuthLibrary = document.frmVboxSettings.vboxSettingsVRDEAuthLibrary.value;

});


</script>
